# Process this file with autoconf to produce a configure script.
AC_PREREQ(2.53)

AC_INIT([gnome-icon-theme], [2.28.0],
        [http://bugzilla.gnome.org/enter_bug.cgi?product=gnome-icon-theme])
AC_CONFIG_SRCDIR(index.theme.in)

AM_INIT_AUTOMAKE([1.9 tar-ustar])

IT_PROG_INTLTOOL([0.40.0])
PKG_PROG_PKG_CONFIG([0.19])

GETTEXT_PACKAGE="${PACKAGE}"
AC_SUBST(GETTEXT_PACKAGE)

AM_GLIB_GNU_GETTEXT

# AM_GLIB_GNU_GETTEXT above subst. $DATADIRNAME
# this is the directory where the *.{mo,gmo} files are installed
localedir='${prefix}/${DATADIRNAME}/locale'
AC_SUBST(localedir)

# Workaround to make aclocal get the right flags
AC_SUBST(ACLOCAL_AMFLAGS, "\${ACLOCAL_FLAGS}")

# Define the toplevel path here
AC_SUBST(themedir, "\${datadir}/icons/gnome")

AC_MSG_CHECKING([development series build])
DEVVERSION="`echo $PACKAGE_VERSION|cut -d. -f2`"
if expr $DEVVERSION % 2 > /dev/null != "0"; then
   mapenable=no
   AC_MSG_RESULT([yes])
else
   mapenable=yes
   AC_MSG_RESULT([no])
fi

AC_ARG_ENABLE([icon-mapping],
	AC_HELP_STRING([--enable-icon-mapping],
			[Enable compatibility symlinks [default=auto]]),
	enable_mapping=$enableval,
	enable_mapping=$mapenable)

ICONMAP="true"
if test "x$enable_mapping" != "xno"; then
   UTILS_REQUIRED=0.8.7

   AC_MSG_CHECKING([icon-naming-utils >= $UTILS_REQUIRED])
   PKG_CHECK_EXISTS(icon-naming-utils >= $UTILS_REQUIRED,
                    have_utils=yes, have_utils=no)
   if test "x$have_utils" = "xyes"; then
      UTILS_PATH="`$PKG_CONFIG --variable=program_path icon-naming-utils`"
      ICONMAP="$UTILS_PATH/icon-name-mapping"
      AC_MSG_RESULT([yes])
   else
      AC_MSG_RESULT([no])
      AC_MSG_ERROR([icon-naming-utils >= $UTILS_REQUIRED is required to build
                    and install gnome-icon-theme])
   fi
fi
AC_SUBST(ICONMAP)

AC_CONFIG_FILES([
Makefile
gnome-icon-theme.pc
8x8/Makefile
16x16/Makefile
22x22/Makefile
24x24/Makefile
32x32/Makefile
48x48/Makefile
scalable/Makefile
8x8/emblems/Makefile
16x16/actions/Makefile
16x16/animations/Makefile
16x16/apps/Makefile
16x16/categories/Makefile
16x16/devices/Makefile
16x16/emblems/Makefile
16x16/emotes/Makefile
16x16/filesystems/Makefile
16x16/mimetypes/Makefile
16x16/places/Makefile
16x16/status/Makefile
16x16/stock/Makefile
16x16/stock/chart/Makefile
16x16/stock/code/Makefile
16x16/stock/data/Makefile
16x16/stock/document/Makefile
16x16/stock/emoticons/Makefile
16x16/stock/form/Makefile
16x16/stock/generic/Makefile
16x16/stock/image/Makefile
16x16/stock/io/Makefile
16x16/stock/media/Makefile
16x16/stock/navigation/Makefile
16x16/stock/net/Makefile
16x16/stock/object/Makefile
16x16/stock/table/Makefile
16x16/stock/text/Makefile
22x22/actions/Makefile
22x22/animations/Makefile
22x22/apps/Makefile
22x22/categories/Makefile
22x22/devices/Makefile
22x22/emblems/Makefile
22x22/emotes/Makefile
22x22/mimetypes/Makefile
22x22/places/Makefile
22x22/status/Makefile
24x24/actions/Makefile
24x24/apps/Makefile
24x24/categories/Makefile
24x24/devices/Makefile
24x24/emblems/Makefile
24x24/emotes/Makefile
24x24/filesystems/Makefile
24x24/mimetypes/Makefile
24x24/places/Makefile
24x24/status/Makefile
24x24/stock/Makefile
24x24/stock/chart/Makefile
24x24/stock/code/Makefile
24x24/stock/data/Makefile
24x24/stock/document/Makefile
24x24/stock/form/Makefile
24x24/stock/generic/Makefile
24x24/stock/image/Makefile
24x24/stock/io/Makefile
24x24/stock/media/Makefile
24x24/stock/navigation/Makefile
24x24/stock/net/Makefile
24x24/stock/object/Makefile
24x24/stock/table/Makefile
24x24/stock/text/Makefile
32x32/actions/Makefile
32x32/animations/Makefile
32x32/apps/Makefile
32x32/categories/Makefile
32x32/devices/Makefile
32x32/emblems/Makefile
32x32/emotes/Makefile
32x32/mimetypes/Makefile
32x32/places/Makefile
32x32/status/Makefile
32x32/stock/Makefile
32x32/stock/generic/Makefile
48x48/actions/Makefile
48x48/animations/Makefile
48x48/apps/Makefile
48x48/devices/Makefile
48x48/filesystems/Makefile
48x48/stock/Makefile
48x48/stock/code/Makefile
48x48/stock/data/Makefile
48x48/stock/document/Makefile
48x48/stock/generic/Makefile
48x48/stock/io/Makefile
48x48/stock/net/Makefile
scalable/actions/Makefile
scalable/apps/Makefile
scalable/categories/Makefile
scalable/devices/Makefile
scalable/emblems/Makefile
scalable/emotes/Makefile
scalable/mimetypes/Makefile
scalable/places/Makefile
scalable/status/Makefile
scalable/stock/Makefile
scalable/stock/generic/Makefile
po/Makefile.in
])

AC_OUTPUT

